<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XMAIL - Анонимная отправка писем</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Добавляем библиотеку для работы с номерами телефонов -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.10.14/libphonenumber-js.min.js"></script>
    <style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --dark: #0f0f23;
            --darker: #090915;
            --light: #f8fafc;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
        }
        
        /* Темная тема (по умолчанию) */
        .theme-dark {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --dark: #0f0f23;
            --darker: #090915;
        }
        
        /* Синяя тема */
        .theme-blue {
            --primary: #3b82f6;
            --secondary: #60a5fa;
            --accent: #93c5fd;
            --dark: #1e3a8a;
            --darker: #1e40af;
        }
        
        /* Фиолетовая тема */
        .theme-purple {
            --primary: #8b5cf6;
            --secondary: #a78bfa;
            --accent: #c4b5fd;
            --dark: #4c1d95;
            --darker: #5b21b6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 50%, #1a1a2e 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 30%, var(--accent) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .floating {
            animation: floating 8s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulseGlow {
            from { 
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
                transform: scale(1);
            }
            to { 
                box-shadow: 0 0 30px rgba(139, 92, 246, 0.5), 0 0 40px rgba(236, 72, 153, 0.3);
                transform: scale(1.02);
            }
        }
        
        .slide-up {
            opacity: 0;
            transform: translateY(30px);
            animation: slideUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        @keyframes slideUp {
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease both;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .tab-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Desktop Navigation */
        .nav-tab {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 10px;
        }
        
        .nav-tab.active::after {
            width: 80%;
        }
        
        /* Mobile Navigation */
        .mobile-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.active {
            transform: translateX(0);
        }
        
        .mobile-nav-item {
            transition: all 0.3s ease;
        }
        
        .mobile-nav-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--primary);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }
        
        .glow-hover {
            transition: all 0.3s ease;
        }
        
        .glow-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.15);
        }
        
        .btn-shine {
            position: relative;
            overflow: hidden;
        }
        
        .btn-shine::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-shine:hover::before {
            left: 100%;
        }
        
        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            color: white;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: var(--success);
        }
        
        .toast.error {
            background: var(--error);
        }
        
        .toast.info {
            background: var(--info);
        }
        
        /* Theme preview */
        .theme-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .theme-preview.active {
            border-color: var(--light);
            transform: scale(1.1);
        }
        
        .theme-preview.dark {
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
        }
        
        .theme-preview.blue {
            background: linear-gradient(135deg, #3b82f6, #60a5fa, #93c5fd);
        }
        
        .theme-preview.purple {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
        }
        
        /* Mobile specific styles */
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            /* Hide desktop elements on mobile */
            .desktop-only {
                display: none !important;
            }
            
            /* Show mobile elements on mobile */
            .mobile-only {
                display: block !important;
            }
            
            /* Mobile header */
            .mobile-header {
                padding: 1rem 0;
            }
            
            /* Mobile stats grid */
            .mobile-stats-grid {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .mobile-stat-card {
                padding: 1rem;
                border-radius: 1rem;
            }
            
            /* Mobile form adjustments */
            .mobile-form-input {
                padding: 1rem;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .mobile-textarea {
                min-height: 120px;
                font-size: 16px;
            }
            
            /* Mobile button adjustments */
            .mobile-btn {
                padding: 1rem;
                font-size: 1.1rem;
                min-height: 54px;
            }
            
            /* Mobile status panel */
            .mobile-status-panel {
                max-height: 200px;
            }
            
            /* Mobile chart container */
            .mobile-chart-container {
                height: 250px;
            }
            
            /* Mobile toast */
            .toast {
                left: 1rem;
                right: 1rem;
                max-width: none;
            }
        }
        
        /* Desktop specific styles */
        @media (min-width: 769px) {
            /* Hide mobile elements on desktop */
            .mobile-only {
                display: none !important;
            }
            
            /* Show desktop elements on desktop */
            .desktop-only {
                display: block !important;
            }
        }
        
        /* Touch improvements */
        @media (hover: none) and (pointer: coarse) {
            .glow-hover:active {
                transform: translateY(-1px);
                box-shadow: 0 5px 15px rgba(99, 102, 241, 0.2);
            }
            
            .btn-shine:active::before {
                left: 100%;
            }
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Premium badge */
        .premium-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500, #FF8C00);
            color: #000;
            font-weight: 800;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        /* Premium modal */
        .premium-modal {
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* License key input */
        .license-input {
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            font-size: 1.1rem;
        }
    </style>
</head>
<body class="relative overflow-x-hidden theme-dark">
    <script src="script.js"></script>
<!-- Animated background particles -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0" id="particles-container"></div>
    
    <!-- Christmas decorations -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0" id="christmas-decorations"></div>

    <!-- Toast Notifications -->
    <div class="toast success" id="successToast" style="display: none;">
        <div class="flex items-center gap-3">
            <i class="fas fa-check-circle"></i>
<span id="toastMessage">Настройки сохранены!</span>
        </div>
    </div>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-only fixed inset-0 bg-black/50 backdrop-blur-sm z-40 mobile-menu" id="mobileMenu">
        <div class="w-80 h-full glass-dark rounded-r-3xl p-6">
            <div class="flex justify-between items-center mb-8">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-xl">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <h2 class="text-xl font-bold text-white">XMAIL</h2>
                    <span class="premium-badge ml-2">PREMIUM</span>
                </div>
                <button class="text-gray-400 hover:text-white text-xl" onclick="closeMobileMenu()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <nav class="space-y-2">
                <button class="mobile-nav-item active w-full text-left py-4 px-4 text-white font-semibold rounded-xl flex items-center gap-3" data-tab="sender" onclick="switchMobileTab('sender')">
                    <i class="fas fa-paper-plane text-blue-400 w-6"></i>
                    <span>Отправка</span>
                </button>
                <button class="mobile-nav-item w-full text-left py-4 px-4 text-gray-400 font-semibold rounded-xl flex items-center gap-3" data-tab="news" onclick="switchMobileTab('news')">
                    <i class="fas fa-newspaper text-yellow-400 w-6"></i>
                    <span>Новости</span>
                </button>
                <button class="mobile-nav-item w-full text-left py-4 px-4 text-gray-400 font-semibold rounded-xl flex items-center gap-3" data-tab="stats" onclick="switchMobileTab('stats')">
                    <i class="fas fa-chart-pie text-purple-400 w-6"></i>
                    <span>Статистика</span>
                </button>
                <button class="mobile-nav-item w-full text-left py-4 px-4 text-gray-400 font-semibold rounded-xl flex items-center gap-3" data-tab="osint" onclick="switchMobileTab('osint')">
                    <i class="fas fa-search text-green-400 w-6"></i>
                    <span>Осинт</span>
                </button>
                <!-- Обновленная кнопка Premium -->
                <button class="mobile-nav-item w-full text-left py-4 px-4 text-white font-semibold rounded-xl flex items-center gap-3 bg-gradient-to-r from-yellow-500/20 to-yellow-600/20" data-tab="premium" onclick="switchMobileTab('premium')">
                    <i class="fas fa-crown text-yellow-400 w-6"></i>
                    <span>Premium (АКТИВНО)</span>
                    <span class="premium-badge ml-auto">БЕСПЛАТНО</span>
                </button>
            </nav>
            
            <div class="absolute bottom-6 left-6 right-6">
                <button onclick="openSettings()" class="w-full glass py-3 px-4 rounded-xl text-white hover:bg-white/10 transition-all duration-300 flex items-center gap-3">
                    <i class="fas fa-cog text-purple-400"></i>
                    <span class="font-medium">Настройки</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content glass rounded-3xl p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">Настройки</h2>
                <button class="text-gray-400 hover:text-white text-xl" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <!-- Тема оформления -->
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Тема оформления</label>
                    <div class="flex gap-3">
                        <div class="theme-preview dark active" data-theme="dark" onclick="selectTheme('dark')" title="Тёмная">
                            <div class="w-full h-full rounded-lg"></div>
                        </div>
                        <div class="theme-preview blue" data-theme="blue" onclick="selectTheme('blue')" title="Синяя">
                            <div class="w-full h-full rounded-lg"></div>
                        </div>
                        <div class="theme-preview purple" data-theme="purple" onclick="selectTheme('purple')" title="Фиолетовая">
                            <div class="w-full h-full rounded-lg"></div>
                        </div>
                    </div>
                </div>

                <!-- Язык -->
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Язык</label>
                    <select id="languageSelect" class="w-full glass-dark border border-gray-700 text-white rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="ru">Русский</option>
                        <option value="en">English</option>
                    </select>
                </div>
                
                <!-- Статус Premium -->
                <div class="bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 rounded-xl p-4 text-center">
                    <div class="flex items-center justify-center gap-3 mb-2">
                        <i class="fas fa-crown text-yellow-400 text-2xl"></i>
                        <span class="text-white font-bold text-lg">Premium активирован</span>
                    </div>
                    <p class="text-gray-300 text-sm">Все функции доступны бесплатно!</p>
                    <p class="text-gray-400 text-xs mt-1">Ключи нафиг не нужны - всё работает сразу</p>
                </div>
                
                <!-- Уведомления -->
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-gray-300 block">Уведомления</span>
                        <span class="text-gray-500 text-sm">Показывать системные уведомления</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notificationsToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Звуковые уведомления -->
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-gray-300 block">Звуковые уведомления</span>
                        <span class="text-gray-500 text-sm">Воспроизводить звук при отправке</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="soundToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Показывать ошибки -->
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-gray-300 block">Показывать ошибки</span>
                        <span class="text-gray-500 text-sm">Отображать детали ошибок отправки</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="showErrorsToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Автоочистка формы -->
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-gray-300 block">Автоочистка формы</span>
                        <span class="text-gray-500 text-sm">Очищать форму после успешной отправки</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoClearToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="flex gap-3">
                    <button onclick="resetSettings()" class="flex-1 glass border border-gray-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-white/5 transition-all duration-300">
                        Сбросить
                    </button>
                    <button onclick="saveSettings()" class="flex-1 gradient-bg text-white font-bold py-3 px-6 rounded-xl hover:opacity-90 transition-all duration-300 pulse-glow">
                        Сохранить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio element for sound notifications -->
    <audio id="notificationSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/286/286-preview.mp3" type="audio/mpeg">
    </audio>

    <!-- Main container -->
    <div class="container mx-auto px-4 py-4 md:py-8 max-w-6xl relative z-10">
        <!-- Mobile Header -->
        <header class="mobile-only mb-6 mobile-header">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-2xl gradient-bg flex items-center justify-center text-white text-2xl pulse-glow">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-black gradient-text">XMAIL</h1>
                        <p class="text-gray-400 text-xs">Анонимная отправка | rooteam</p>
                    </div>
                    <span class="premium-badge">PREMIUM</span>
                </div>
                
                <div class="flex items-center gap-2">
                    <a href="https://t.me/rooteam" target="_blank" class="glass p-3 rounded-xl text-white hover:bg-white/10 transition-all duration-300">
                        <i class="fab fa-telegram text-blue-400"></i>
                    </a>
                    <button onclick="openMobileMenu()" class="glass p-3 rounded-xl text-white hover:bg-white/10 transition-all duration-300">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Desktop Header -->
        <header class="desktop-only mb-12">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 mb-10 slide-up" style="animation-delay: 0.1s;">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 rounded-2xl gradient-bg flex items-center justify-center text-white text-3xl pulse-glow floating">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div>
                        <h1 class="text-4xl md:text-5xl font-black gradient-text">XMAIL</h1>
                        <p class="text-gray-400 text-sm mt-1">Анонимная отправка писем | Сайт ебнут командой <span class="text-blue-400 font-bold">rooteam</span></p>
                    </div>
                    <span class="premium-badge ml-4">PREMIUM АКТИВНО</span>
                </div>
                
                <div class="flex items-center gap-3">
                    <a href="https://t.me/rooteam" target="_blank" class="glass px-5 py-3 rounded-xl text-white hover:bg-white/10 transition-all duration-300 glow-hover flex items-center gap-3">
                        <i class="fab fa-telegram text-blue-400 text-xl"></i>
                        <span class="font-medium">rooteam</span>
                    </a>
                    
                    <button onclick="openSettings()" class="glass px-5 py-3 rounded-xl text-white hover:bg-white/10 transition-all duration-300 glow-hover flex items-center gap-3">
                        <i class="fas fa-cog text-purple-400 text-xl"></i>
                        <span class="font-medium">Настройки</span>
                    </button>
                </div>
            </div>
            
            <div class="flex space-x-1 glass-dark rounded-2xl p-2 slide-up">
                <button class="nav-tab active flex-1 py-4 px-6 text-white font-semibold rounded-xl transition-all duration-300 flex items-center justify-center gap-3" data-tab="sender">
                    <i class="fas fa-paper-plane text-blue-400"></i>
                    <span>Отправка</span>
                </button>
                <button class="nav-tab flex-1 py-4 px-6 text-gray-400 font-semibold rounded-xl transition-all duration-300 flex items-center justify-center gap-3" data-tab="news">
                    <i class="fas fa-newspaper text-yellow-400"></i>
                    <span>Новости</span>
                </button>
                <button class="nav-tab flex-1 py-4 px-6 text-gray-400 font-semibold rounded-xl transition-all duration-300 flex items-center justify-center gap-3" data-tab="stats">
                    <i class="fas fa-chart-pie text-purple-400"></i>
                    <span>Статистика</span>
                </button>
                <button class="nav-tab flex-1 py-4 px-6 text-gray-400 font-semibold rounded-xl transition-all duration-300 flex items-center justify-center gap-3" data-tab="osint">
                    <i class="fas fa-search text-green-400"></i>
                    <span>Осинт</span>
                </button>
                <!-- Обновленная кнопка Premium -->
                <button class="nav-tab flex-1 py-4 px-6 text-white font-semibold rounded-xl transition-all duration-300 flex items-center justify-center gap-3 bg-gradient-to-r from-yellow-500/20 to-yellow-600/20" data-tab="premium">
                    <i class="fas fa-crown text-yellow-400"></i>
                    <span>Premium</span>
                    <span class="premium-badge ml-2">БЕСПЛАТНО</span>
                </button>
            </div>
        </header>

        <!-- Main content -->
        <main>
            <!-- Sender tab -->
            <div id="sender" class="tab-content active">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8">
                    <!-- Email Form -->
                    <div class="glass rounded-3xl overflow-hidden shadow-2xl slide-up" style="animation-delay: 0.3s;">
                        <div class="p-6 md:p-8">
                            <div class="flex items-center gap-3 mb-6 md:mb-8">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-lg md:text-xl">
                                    <i class="fas fa-rocket"></i>
                                </div>
                                <h2 class="text-xl md:text-2xl font-bold text-white">Отправка письма</h2>
                                <span class="premium-badge ml-2">PREMIUM</span>
                            </div>
                            
                            <form id="emailForm" class="space-y-4 md:space-y-6">
                                <div>
                                    <label for="receiver" class="block text-sm font-medium text-gray-300 mb-2 md:mb-3">Почта получателя</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 md:pl-4 flex items-center pointer-events-none">
                                            <i class="fas fa-envelope text-gray-500"></i>
                                        </div>
                                        <input type="email" id="receiver" required 
                                               class="w-full glass-dark border border-gray-700 text-white rounded-xl pl-10 md:pl-12 pr-4 py-3 md:py-4 mobile-form-input transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               placeholder="example@gmail.com">
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="subject" class="block text-sm font-medium text-gray-300 mb-2 md:mb-3">Тема письма</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 md:pl-4 flex items-center pointer-events-none">
                                            <i class="fas fa-heading text-gray-500"></i>
                                        </div>
                                        <input type="text" id="subject" required 
                                               class="w-full glass-dark border border-gray-700 text-white rounded-xl pl-10 md:pl-12 pr-4 py-3 md:py-4 mobile-form-input transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               placeholder="Важная тема">
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="body" class="block text-sm font-medium text-gray-300 mb-2 md:mb-3">Текст письма</label>
                                    <textarea id="body" rows="4" required 
                                              class="w-full glass-dark border border-gray-700 text-white rounded-xl px-4 py-3 md:py-4 mobile-textarea transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                              placeholder="Введите текст вашего письма здесь..."></textarea>
                                </div>
                                
                                <button type="submit" id="sendBtn" class="w-full gradient-bg text-white font-bold py-3 md:py-4 px-6 rounded-xl hover:opacity-90 transition-all duration-300 flex items-center justify-center gap-3 pulse-glow btn-shine mobile-btn">
                                    <i class="fas fa-paper-plane"></i>
                                    <span class="text-base md:text-lg">ОТПРАВИТЬ ПИСЬМО</span>
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Status Panel -->
                    <div class="space-y-6 md:space-y-8">
                        <div class="glass rounded-3xl overflow-hidden shadow-2xl slide-up" style="animation-delay: 0.4s;">
                            <div class="p-6 md:p-8">
                                <div class="flex justify-between items-center mb-6 md:mb-8">
                                    <h2 class="text-xl md:text-2xl font-bold text-white flex items-center gap-2 md:gap-3">
                                        <i class="fas fa-chart-bar text-green-400"></i>
                                        <span>Статистика отправки</span>
                                    </h2>
                                    
                                    <div class="flex items-center gap-4 md:gap-6">
                                        <div class="text-center">
                                            <div class="text-2xl md:text-3xl font-bold text-blue-400" id="totalCount">0</div>
                                            <div class="text-xs text-gray-400 mt-1">Всего</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-2xl md:text-3xl font-bold text-green-400" id="sentCount">0</div>
                                            <div class="text-xs text-gray-400 mt-1">Успешно</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-2xl md:text-3xl font-bold text-red-400" id="errorCount">0</div>
                                            <div class="text-xs text-gray-400 mt-1">Ошибок</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4 md:mb-6">
                                    <div class="flex justify-between text-sm text-gray-400 mb-2">
                                        <span>Прогресс отправки</span>
                                        <span id="progressPercent">0%</span>
                                    </div>
                                    <div class="h-2 md:h-3 w-full glass-dark rounded-full overflow-hidden">
                                        <div id="progress" class="h-full gradient-bg rounded-full transition-all duration-500" style="width: 0%"></div>
                                    </div>
                                    <div class="text-center text-sm text-gray-400 mt-2 md:mt-3" id="currentSender">Ожидание запуска...</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass rounded-3xl overflow-hidden shadow-2xl slide-up" style="animation-delay: 0.5s;">
                            <div class="p-4 md:p-6">
                                <h3 class="text-lg font-bold text-white mb-3 md:mb-4 flex items-center gap-2 md:gap-3">
                                    <i class="fas fa-list-alt text-purple-400"></i>
                                    <span>Лог отправки</span>
                                </h3>
                                <div class="bg-black/30 rounded-xl p-3 md:p-4 h-48 md:h-64 overflow-y-auto mobile-status-panel" id="status">
                                    <div class="flex items-start gap-3 p-3 text-gray-300">
                                        <i class="fas fa-info-circle text-blue-400 mt-1"></i>
                                        <div>Готов к отправке. Заполните форму и нажмите кнопку.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- News tab -->
            <div id="news" class="tab-content">
                <div class="glass rounded-3xl overflow-hidden shadow-2xl p-6 md:p-8 slide-up">
                    <h2 class="text-2xl font-bold text-white mb-6 md:mb-8 flex items-center gap-3">
                        <i class="fas fa-newspaper text-yellow-400"></i>
                        <span>Последние новости</span>
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-blue-500 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-3 mb-3 md:mb-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl gradient-bg flex items-center justify-center text-white">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-white text-sm md:text-base">Premium теперь бесплатен!</h3>
                                    <p class="text-xs text-gray-400">Сегодня, 15:30</p>
                                </div>
                            </div>
                            <p class="text-gray-300 text-xs md:text-sm leading-relaxed">
                                Все функции XMAIL теперь полностью бесплатны! Ключи нафиг не нужны - всё работает сразу. 
                                Сайт ебнут командой <span class="text-blue-400 font-bold">rooteam</span>.
                            </p>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-green-500 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-3 mb-3 md:mb-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-green-600 flex items-center justify-center text-white">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-white text-sm md:text-base">Все функции разблокированы</h3>
                                    <p class="text-xs text-gray-400">Сегодня, 15:15</p>
                                </div>
                            </div>
                            <p class="text-gray-300 text-xs md:text-sm leading-relaxed">
                                Все Premium функции теперь доступны каждому пользователю бесплатно. 
                                Наслаждайтесь полным функционалом без ограничений!
                            </p>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-purple-500 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-3 mb-3 md:mb-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-purple-600 flex items-center justify-center text-white">
                                    <i class="fab fa-telegram"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-white text-sm md:text-base">Наш Telegram</h3>
                                    <p class="text-xs text-gray-400">Всегда актуально</p>
                                </div>
                            </div>
                            <p class="text-gray-300 text-xs md:text-sm leading-relaxed">
                                Подписывайтесь на наш Telegram канал 
                                <a href="https://t.me/rooteam" class="text-blue-400 hover:underline font-bold" target="_blank">@rooteam</a> 
                                для получения последних обновлений и новостей.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stats tab -->
            <div id="stats" class="tab-content">
                <div class="glass rounded-3xl overflow-hidden shadow-2xl p-6 md:p-8 slide-up">
                    <h2 class="text-2xl font-bold text-white mb-6 md:mb-8 flex items-center gap-3">
                        <i class="fas fa-chart-pie text-purple-400"></i>
                        <span>Ваша статистика</span>
                        <span class="premium-badge ml-2">PREMIUM</span>
                    </h2>
                    
                    <!-- Mobile Stats Grid -->
                    <div class="mobile-only mobile-stats-grid mb-6 md:mb-8">
                        <div class="glass-dark rounded-2xl p-4 border border-gray-700 mobile-stat-card">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-xl">
                                    <i class="fas fa-paper-plane"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Всего отправлено</div>
                                    <div class="text-2xl font-bold text-white" id="mobileTotalStats">0</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-4 border border-gray-700 mobile-stat-card">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-xl bg-green-600 flex items-center justify-center text-white text-xl">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Успешных</div>
                                    <div class="text-2xl font-bold text-white" id="mobileSuccessStats">0</div>
                                    <div class="text-xs text-green-400 mt-1" id="mobileSuccessRate">0% успеха</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-4 border border-gray-700 mobile-stat-card">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-xl bg-red-600 flex items-center justify-center text-white text-xl">
                                    <i class="fas fa-times-circle"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Ошибок</div>
                                    <div class="text-2xl font-bold text-white" id="mobileErrorStats">0</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-4 border border-gray-700 mobile-stat-card">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-xl bg-blue-600 flex items-center justify-center text-white text-xl">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Среднее время</div>
                                    <div class="text-2xl font-bold text-white" id="mobileAvgTime">0с</div>
                                    <div class="text-xs text-blue-400 mt-1">на письмо</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Desktop Stats Grid -->
                    <div class="desktop-only grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="glass-dark rounded-2xl p-6 border border-gray-700 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-xl gradient-bg flex items-center justify-center text-white text-2xl">
                                    <i class="fas fa-paper-plane"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Всего отправлено</div>
                                    <div class="text-2xl font-bold text-white" id="totalStats">0</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-6 border border-gray-700 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-xl bg-green-600 flex items-center justify-center text-white text-2xl">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Успешных</div>
                                    <div class="text-2xl font-bold text-white" id="successStats">0</div>
                                    <div class="text-xs text-green-400 mt-1" id="successRate">0% успеха</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-6 border border-gray-700 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-xl bg-red-600 flex items-center justify-center text-white text-2xl">
                                    <i class="fas fa-times-circle"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Ошибок</div>
                                    <div class="text-2xl font-bold text-white" id="errorStats">0</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-dark rounded-2xl p-6 border border-gray-700 transition-all duration-300 hover:transform hover:scale-105 glow-hover">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-xl bg-blue-600 flex items-center justify-center text-white text-2xl">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-400">Среднее время</div>
                                    <div class="text-2xl font-bold text-white" id="avgTime">0с</div>
                                    <div class="text-xs text-blue-400 mt-1">на письмо</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-dark rounded-2xl p-4 md:p-6 border border-gray-700">
                        <div class="flex justify-between items-center mb-4 md:mb-6">
                            <h3 class="text-lg font-bold text-white flex items-center gap-2 md:gap-3">
                                <i class="fas fa-calendar-alt text-yellow-400"></i>
                                <span>Активность за месяц</span>
                            </h3>
                            <button onclick="refreshChart()" class="glass px-3 py-2 rounded-lg text-gray-300 hover:text-white transition-all duration-300 flex items-center gap-2 glow-hover">
                                <i class="fas fa-sync-alt"></i>
                                <span class="text-sm">Обновить</span>
                            </button>
                        </div>
                        <div class="h-64 md:h-64 mobile-chart-container">
                            <canvas id="activityChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- OSINT таб -->
            <div id="osint" class="tab-content">
                <div class="glass rounded-3xl overflow-hidden shadow-2xl p-6 md:p-8 slide-up">
                    <div class="flex items-center gap-3 mb-6 md:mb-8">
                        <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-lg md:text-xl">
                            <i class="fas fa-search"></i>
                        </div>
                        <h2 class="text-xl md:text-2xl font-bold text-white">OSINT - Разведывательный поиск</h2>
                        <span class="premium-badge ml-2">PREMIUM</span>
                    </div>

                    <!-- Выбор типа поиска -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8">
                        <button id="phoneSearchBtn" class="glass-dark rounded-2xl p-4 md:p-6 border-2 border-green-500/50 hover:border-green-500 transition-all duration-300 flex items-center gap-4 glow-hover">
                            <div class="w-12 h-12 md:w-14 md:h-14 rounded-xl bg-green-600 flex items-center justify-center text-white text-xl md:text-2xl">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="text-left">
                                <h3 class="font-bold text-white text-lg md:text-xl">Поиск по номеру телефона</h3>
                                <p class="text-gray-400 text-sm md:text-base mt-1">Информация об операторе, регионе и мессенджерах</p>
                            </div>
                        </button>

                        <button id="ipSearchBtn" class="glass-dark rounded-2xl p-4 md:p-6 border-2 border-blue-500/50 hover:border-blue-500 transition-all duration-300 flex items-center gap-4 glow-hover">
                            <div class="w-12 h-12 md:w-14 md:h-14 rounded-xl bg-blue-600 flex items-center justify-center text-white text-xl md:text-2xl">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="text-left">
                                <h3 class="font-bold text-white text-lg md:text-xl">Поиск по IP-адресу</h3>
                                <p class="text-gray-400 text-sm md:text-base mt-1">Геолокация, провайдер и техническая информация</p>
                            </div>
                        </button>
                    </div>

                    <!-- Форма поиска по номеру телефона -->
                    <div id="phoneSearchForm" class="glass-dark rounded-2xl p-4 md:p-6 mb-6 md:mb-8" style="display: none;">
                        <h3 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center gap-3">
                            <i class="fas fa-phone text-green-400"></i>
                            <span>Поиск по номеру телефона</span>
                        </h3>
                        
                        <form id="phoneForm" class="space-y-4">
                            <div>
                                <label for="phoneNumber" class="block text-sm font-medium text-gray-300 mb-2">Номер телефона</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 md:pl-4 flex items-center pointer-events-none">
                                        <i class="fas fa-phone text-gray-500"></i>
                                    </div>
                                    <input type="text" id="phoneNumber" required 
                                           class="w-full glass border border-gray-600 text-white rounded-xl pl-10 md:pl-12 pr-4 py-3 md:py-4 mobile-form-input transition-all duration-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"
                                           placeholder="+79123456789 или 89123456789">
                                </div>
                                <p class="text-gray-400 text-xs mt-2">Поддерживаются российские и международные форматы</p>
                            </div>
                            
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 md:py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3 pulse-glow btn-shine mobile-btn">
                                <i class="fas fa-search"></i>
                                <span class="text-base md:text-lg">НАЙТИ ИНФОРМАЦИЮ</span>
                            </button>
                        </form>
                    </div>

                    <!-- Форма поиска по IP -->
                    <div id="ipSearchForm" class="glass-dark rounded-2xl p-4 md:p-6 mb-6 md:mb-8" style="display: none;">
                        <h3 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center gap-3">
                            <i class="fas fa-network-wired text-blue-400"></i>
                            <span>Поиск по IP-адресу</span>
                        </h3>
                        
                        <form id="ipForm" class="space-y-4">
                            <div>
                                <label for="ipAddress" class="block text-sm font-medium text-gray-300 mb-2">IP-адрес</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 md:pl-4 flex items-center pointer-events-none">
                                        <i class="fas fa-globe text-gray-500"></i>
                                    </div>
                                    <input type="text" id="ipAddress" required 
                                           class="w-full glass border border-gray-600 text-white rounded-xl pl-10 md:pl-12 pr-4 py-3 md:py-4 mobile-form-input transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           placeholder="192.168.1.1">
                                </div>
                                <p class="text-gray-400 text-xs mt-2">Введите IPv4 адрес для анализа</p>
                            </div>
                            
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 md:py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3 pulse-glow btn-shine mobile-btn">
                                <i class="fas fa-search"></i>
                                <span class="text-base md:text-lg">НАЙТИ ИНФОРМАЦИЮ</span>
                            </button>
                        </form>
                    </div>

                    <!-- Результаты поиска -->
                    <div id="searchResults" class="glass-dark rounded-2xl p-4 md:p-6" style="display: none;">
                        <h3 class="text-lg md:text-xl font-bold text-white mb-4 flex items-center gap-3">
                            <i class="fas fa-list-alt text-purple-400"></i>
                            <span>Результаты поиска</span>
                        </h3>
                        
                        <div class="space-y-4 md:space-y-6" id="resultsContainer">
                            <!-- Результаты будут добавляться сюда -->
                        </div>
                    </div>

                    <!-- Состояние загрузки -->
                    <div id="loadingState" class="glass-dark rounded-2xl p-6 md:p-8 text-center" style="display: none;">
                        <div class="flex flex-col items-center justify-center gap-4">
                            <div class="w-16 h-16 md:w-20 md:h-20 rounded-full gradient-bg flex items-center justify-center text-white text-2xl md:text-3xl">
                                <i class="fas fa-circle-notch fa-spin"></i>
                            </div>
                            <div>
                                <h3 class="text-lg md:text-xl font-bold text-white mb-2">Идет поиск информации...</h3>
                                <p class="text-gray-400 text-sm md:text-base">Это может занять несколько секунд</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PREMIUM таб -->
            <div id="premium" class="tab-content">
                <div class="glass rounded-3xl overflow-hidden shadow-2xl p-6 md:p-8 slide-up">
                    <div class="flex items-center gap-3 mb-6 md:mb-8">
                        <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-lg md:text-xl">
                            <i class="fas fa-crown"></i>
                        </div>
                        <h2 class="text-xl md:text-2xl font-bold text-white">XMAIL Premium - ВСЁ БЕСПЛАТНО!</h2>
                    </div>

                    <!-- Бесплатный Premium баннер -->
                    <div class="gradient-bg rounded-2xl p-6 md:p-8 mb-6 md:mb-8 relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"></div>
                        
                        <div class="relative z-10">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-12 h-12 md:w-14 md:h-14 rounded-full bg-yellow-500/20 flex items-center justify-center">
                                    <i class="fas fa-gem text-yellow-400 text-2xl"></i>
                                </div>
                                <div>
                                    <span class="premium-badge">БЕСПЛАТНО</span>
                                    <p class="text-white/80 text-sm mt-1">Все функции разблокированы!</p>
                                </div>
                            </div>
                            
                            <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">PREMIUM АКТИВИРОВАН</h3>
                            <p class="text-white/80 text-lg mb-6">Все функции XMAIL теперь полностью бесплатны! Ключи нафиг не нужны - всё работает сразу.</p>
                            
                            <div class="flex items-center gap-4">
                                <div class="text-3xl font-bold text-white">
                                    <span class="text-yellow-400">$0.00</span>
                                    <span class="text-2xl line-through text-white/50 ml-2">$14.99</span>
                                </div>
                                <div class="bg-green-500/20 text-green-400 font-bold px-4 py-2 rounded-lg">
                                    -100% СКИДКА
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Преимущества Premium -->
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <i class="fas fa-star text-yellow-400"></i>
                        <span>Что включено в Premium? (ВСЁ БЕСПЛАТНО(хоть тмд не реализовал)!)</span>
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-8">
                        <!-- Преимущество 1 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-blue-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-400 text-xl">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Все функции разблокированы</h4>
                                    <p class="text-gray-400">Масса новых функций в релизе, более 20 штук - всё доступно бесплатно!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Преимущество 2 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-green-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-green-500/20 flex items-center justify-center text-green-400 text-xl">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Максимальная анонимность</h4>
                                    <p class="text-gray-400">Выбор / настройка прокси, для точной анонимности</p>
                                </div>
                            </div>
                        </div>

                        <!-- Преимущество 3 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-purple-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-purple-400 text-xl">
                                    <i class="fas fa-infinity"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Безлимитная отправка</h4>
                                    <p class="text-gray-400">Отправляйте неограниченное количество писем без каких-либо ограничений</p>
                                </div>
                            </div>
                        </div>

                        <!-- Преимущество 4 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-yellow-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center text-yellow-400 text-xl">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Приоритет во всем</h4>
                                    <p class="text-gray-400">Приоритет во всем, начиная с поддержки, заканчивая отправкой писем</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Новые функции -->
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <i class="fas fa-rocket text-red-400"></i>
                        <span>Все функции разблокированы:</span>
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-8">
                        <!-- Функция 1 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-red-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-red-500/20 flex items-center justify-center text-red-400 text-xl">
                                    <i class="fas fa-bullhorn"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Кампании</h4>
                                    <p class="text-gray-400">Создание и управление осинт кампаниями для работы с друзьями</p>
                                </div>
                            </div>
                        </div>

                        <!-- Функция 2 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-teal-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-teal-500/20 flex items-center justify-center text-teal-400 text-xl">
                                    <i class="fab fa-telegram"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Поиск по юзернейму Telegram</h4>
                                    <p class="text-gray-400">Поиск информации по username Telegram, облачная база данных</p>
                                </div>
                            </div>
                        </div>

                        <!-- Функция 3 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-orange-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-orange-500/20 flex items-center justify-center text-orange-400 text-xl">
                                    <i class="fas fa-snowflake"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Фризер для Telegram</h4>
                                    <p class="text-gray-400">Функция удаления/заморозки Telegram аккаунтов</p>
                                </div>
                            </div>
                        </div>

                        <!-- Функция 4 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-pink-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-pink-500/20 flex items-center justify-center text-pink-400 text-xl">
                                    <i class="fas fa-paper-plane"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Массовые рассылки</h4>
                                    <p class="text-gray-400">Массовая рассылка на одну или более почт</p>
                                </div>
                            </div>
                        </div>

                        <!-- Функция 5 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-indigo-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center text-indigo-400 text-xl">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">API доступ</h4>
                                    <p class="text-gray-400">Полноценное API для интеграции с вашими программами и автоматизации</p>
                                </div>
                            </div>
                        </div>

                        <!-- Функция 6 -->
                        <div class="glass-dark rounded-2xl p-4 md:p-6 border-l-4 border-cyan-500">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-cyan-500/20 flex items-center justify-center text-cyan-400 text-xl">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Работа с API</h4>
                                    <p class="text-gray-400">Доступ к функциям через API</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Информация о команде -->
                    <div class="glass-dark rounded-2xl p-6 md:p-8 mb-8 text-center">
                        <h4 class="text-lg font-bold text-white mb-4">
                            <i class="fas fa-users text-blue-400 mr-2"></i>
                            Сайт ебнут командой:
                        </h4>
                        <div class="text-3xl font-bold gradient-text mb-4">ROOTEAM</div>
                        <p class="text-gray-400">
                            Подписывайтесь на наш Telegram: 
                            <a href="https://t.me/rooteam" target="_blank" class="text-blue-400 hover:text-blue-300 font-bold">@rooteam</a>
                        </p>
                        <p class="text-gray-500 text-sm mt-2">Ключи нафиг не нужны - всё работает сразу и бесплатно!</p>
                    </div>

                    <!-- Информация о гарантиях -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8 pt-8 border-t border-gray-700">
                        <div class="text-center">
                            <div class="w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 text-xl mx-auto mb-3">
                                <i class="fas fa-lock"></i>
                            </div>
                            <p class="text-gray-300 text-sm">Полная анонимность</p>
                        </div>
                        <div class="text-center">
                            <div class="w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 text-xl mx-auto mb-3">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <p class="text-gray-300 text-sm">Все функции бесплатны</p>
                        </div>
                        <div class="text-center">
                            <div class="w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-400 text-xl mx-auto mb-3">
                                <i class="fab fa-telegram"></i>
                            </div>
                            <p class="text-gray-300 text-sm">Поддержка в Telegram</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="mt-8 md:mt-16 text-center text-gray-500 text-sm slide-up" style="animation-delay: 0.8s;">
            <div class="mb-4">
                <a href="https://t.me/rooteam" target="_blank" class="inline-flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors">
                    <i class="fab fa-telegram"></i>
                    <span>Наш Telegram: @rooteam</span>
                </a>
            </div>
            <p>© 2026 Xmail | SMTP отправка | Полная анонимность</p>
            <p class="text-gray-600 mt-2">Сайт ебнут командой <span class="text-blue-400 font-bold">rooteam</span></p>
        </footer>
    </div>

    <!-- Telegram floating button -->
    <a href="https://t.me/rooteam" target="_blank" class="fixed bottom-6 right-6 md:bottom-8 md:right-8 w-14 h-14 md:w-16 md:h-16 rounded-2xl gradient-bg text-white flex items-center justify-center text-xl md:text-2xl shadow-2xl hover:scale-110 transition-transform z-50 pulse-glow">
        <i class="fab fa-telegram"></i>
    </a>

    <script>
        // Настройки по умолчанию - Premium всегда активен
        const defaultSettings = {
            theme: 'dark',
            language: 'ru',
            notifications: true,
            soundNotifications: true,
            showErrors: true,
            autoClear: true,
            premium: true, // Всегда true
            premiumKey: 'ROOTEAM-FREE-2026',
            premiumExpiry: '2099-12-31'
        };

        let currentSettings = {...defaultSettings};

        // OSINT Engine
        class OSINTEngine {
            constructor() {
                this.currentSearchType = null;
            }

            validateIP(ip) {
                const ipRegex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
                return ipRegex.test(ip);
            }

            validatePhone(phone) {
                const cleanPhone = phone.replace(/[^\d+]/g, '');
                return cleanPhone.length >= 10 && cleanPhone.length <= 15;
            }

            async searchIP(ip) {
                try {
                    if (!this.validateIP(ip)) {
                        throw new Error('Неверный формат IP-адреса');
                    }

                    const response = await fetch(`https://ipapi.co/${ip}/json/`);
                    const data = await response.json();

                    if (data.error) {
                        throw new Error(data.reason || 'Не удалось получить информацию об IP');
                    }

                    return this.formatIPResults(data);
                } catch (error) {
                    throw new Error(`Ошибка поиска: ${error.message}`);
                }
            }

            formatIPResults(data) {
                const results = [];
                results.push({
                    icon: 'fas fa-info-circle',
                    title: 'Основная информация',
                    desc: `IP: ${data.ip}`,
                    data: {
                        'IP-адрес': data.ip,
                        'Версия IP': data.version || 'IPv4',
                        'Тип': data.type || 'Публичный'
                    }
                });

                if (data.country_name) {
                    results.push({
                        icon: 'fas fa-map-marker-alt',
                        title: 'Геолокация',
                        desc: `${data.city || ''}, ${data.country_name}`,
                        data: {
                            'Страна': data.country_name,
                            'Код страны': data.country_code,
                            'Регион': data.region,
                            'Город': data.city,
                            'Почтовый индекс': data.postal,
                            'Широта': data.latitude,
                            'Долгота': data.longitude,
                            'Часовой пояс': data.timezone
                        }
                    });
                }

                if (data.org) {
                    results.push({
                        icon: 'fas fa-network-wired',
                        title: 'Провайдер',
                        desc: data.org,
                        data: {
                            'Организация': data.org,
                            'ASN': data.asn || 'Неизвестно'
                        }
                    });
                }

                if (data.latitude && data.longitude) {
                    results.push({
                        icon: 'fas fa-map',
                        title: 'Карты',
                        desc: 'Открыть на картах',
                        data: {
                            'Google Maps': `https://maps.google.com/?q=${data.latitude},${data.longitude}`,
                            'OpenStreetMap': `https://www.openstreetmap.org/?mlat=${data.latitude}&mlon=${data.longitude}#map=15/${data.latitude}/${data.longitude}`
                        }
                    });
                }

                return results;
            }

            async searchPhone(phone) {
                try {
                    if (!this.validatePhone(phone)) {
                        throw new Error('Неверный формат номера телефона');
                    }

                    const results = [];
                    const phoneNumber = libphonenumber.parsePhoneNumber(phone);
                    
                    if (!phoneNumber || !phoneNumber.isValid()) {
                        throw new Error('Неверный номер телефона');
                    }

                    results.push({
                        icon: 'fas fa-sim-card',
                        title: 'Информация о номере',
                        desc: `Тип: ${phoneNumber.getType() || 'Мобильный'}`,
                        data: {
                            'Номер в международном формате': phoneNumber.formatInternational(),
                            'Номер в национальном формате': phoneNumber.formatNational(),
                            'Страна': phoneNumber.country || 'Неизвестно',
                            'Код страны': phoneNumber.countryCallingCode,
                            'Валидность': phoneNumber.isValid() ? 'Валидный' : 'Невалидный',
                            'Возможность номера': phoneNumber.isPossible() ? 'Возможный' : 'Невозможный'
                        }
                    });

                    const cleanNumber = phoneNumber.number.replace('+', '');
                    const messengers = [
                        {
                            name: 'WhatsApp',
                            url: `https://wa.me/${cleanNumber}`,
                            icon: 'fab fa-whatsapp'
                        },
                        {
                            name: 'Telegram',
                            url: `https://t.me/${cleanNumber}`,
                            icon: 'fab fa-telegram'
                        },
                        {
                            name: 'Viber',
                            url: `viber://chat?number=${cleanNumber}`,
                            icon: 'fab fa-viber'
                        }
                    ];

                    results.push({
                        icon: 'fas fa-comments',
                        title: 'Мессенджеры',
                        desc: 'Ссылки для связи',
                        data: Object.fromEntries(
                            messengers.map(m => [m.name, m.url])
                        )
                    });

                    return results;
                } catch (error) {
                    throw new Error(`Ошибка анализа номера: ${error.message}`);
                }
            }

            displayResults(results) {
                const container = document.getElementById('resultsContainer');
                container.innerHTML = '';

                results.forEach((result, index) => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'glass rounded-2xl p-4 md:p-6 border-l-4 border-blue-500';
                    resultElement.style.animationDelay = `${index * 0.1}s`;
                    resultElement.classList.add('slide-up');

                    let dataHTML = '';
                    if (result.data && typeof result.data === 'object') {
                        dataHTML = '<div class="mt-4 space-y-2">';
                        for (const [key, value] of Object.entries(result.data)) {
                            if (typeof value === 'string' && value.startsWith('http')) {
                                dataHTML += `
                                    <div class="flex justify-between items-center py-2 border-b border-gray-700">
                                        <span class="text-gray-300">${key}:</span>
                                        <a href="${value}" target="_blank" class="text-blue-400 hover:text-blue-300 hover:underline">
                                            Открыть <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                `;
                            } else {
                                dataHTML += `
                                    <div class="flex justify-between items-center py-2 border-b border-gray-700">
                                        <span class="text-gray-300">${key}:</span>
                                        <span class="text-white font-medium">${value || 'Неизвестно'}</span>
                                    </div>
                                `;
                            }
                        }
                        dataHTML += '</div>';
                    }

                    resultElement.innerHTML = `
                        <div class="flex items-start gap-3 md:gap-4">
                            <div class="w-10 h-10 md:w-12 md:h-12 rounded-xl gradient-bg flex items-center justify-center text-white text-lg md:text-xl mt-1">
                                <i class="${result.icon}"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-white text-lg md:text-xl mb-2">${result.title}</h4>
                                <p class="text-gray-300 mb-3">${result.desc}</p>
                                ${dataHTML}
                            </div>
                        </div>
                    `;

                    container.appendChild(resultElement);
                });
            }

            displayError(message) {
                const container = document.getElementById('resultsContainer');
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-16 h-16 md:w-20 md:h-20 rounded-full bg-red-500/20 flex items-center justify-center text-red-400 text-2xl md:text-3xl mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-white mb-2">Ошибка</h3>
                        <p class="text-gray-400">${message}</p>
                    </div>
                `;
            }
        }

        // Инициализация OSINT движка
        const osintEngine = new OSINTEngine();

        // Функции для OSINT
        document.getElementById('phoneSearchBtn').addEventListener('click', function() {
            showSearchForm('phone');
        });

        document.getElementById('ipSearchBtn').addEventListener('click', function() {
            showSearchForm('ip');
        });

        function showSearchForm(type) {
            document.getElementById('phoneSearchForm').style.display = 'none';
            document.getElementById('ipSearchForm').style.display = 'none';
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('loadingState').style.display = 'none';

            if (type === 'phone') {
                document.getElementById('phoneSearchForm').style.display = 'block';
                osintEngine.currentSearchType = 'phone';
            } else {
                document.getElementById('ipSearchForm').style.display = 'block';
                osintEngine.currentSearchType = 'ip';
            }
        }

        document.getElementById('phoneForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            await performSearch('phone');
        });

        document.getElementById('ipForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            await performSearch('ip');
        });

        async function performSearch(type) {
            const searchInput = type === 'phone' ? 
                document.getElementById('phoneNumber').value.trim() : 
                document.getElementById('ipAddress').value.trim();

            if (!searchInput) {
                showToast('Введите данные для поиска', 'error');
                return;
            }

            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('loadingState').style.display = 'block';

            try {
                let results;
                if (type === 'phone') {
                    results = await osintEngine.searchPhone(searchInput);
                } else {
                    results = await osintEngine.searchIP(searchInput);
                }

                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('searchResults').style.display = 'block';
                osintEngine.displayResults(results);

                showToast('Поиск завершен успешно!', 'success');
            } catch (error) {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('searchResults').style.display = 'block';
                osintEngine.displayError(error.message);
                showToast('Ошибка при поиске', 'error');
            }
        }

        // Загрузка настроек
        function loadSettings() {
            const savedSettings = localStorage.getItem('xmailSettings');
            if (savedSettings) {
                try {
                    currentSettings = {...defaultSettings, ...JSON.parse(savedSettings)};
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
            // Всегда активируем Premium
            currentSettings.premium = true;
            applySettings();
            updatePremiumUI();
        }

        // Сохранение настроек
        function saveSettings() {
            try {
                currentSettings.theme = document.querySelector('.theme-preview.active').dataset.theme;
                currentSettings.language = document.getElementById('languageSelect').value;
                currentSettings.notifications = document.getElementById('notificationsToggle').checked;
                currentSettings.soundNotifications = document.getElementById('soundToggle').checked;
                currentSettings.showErrors = document.getElementById('showErrorsToggle').checked;
                currentSettings.autoClear = document.getElementById('autoClearToggle').checked;
                
                // Всегда активируем Premium
                currentSettings.premium = true;
                currentSettings.premiumKey = 'ROOTEAM-FREE-2026';
                currentSettings.premiumExpiry = '2099-12-31';
                
                localStorage.setItem('xmailSettings', JSON.stringify(currentSettings));
                applySettings();
                
                showToast('Настройки успешно сохранены!', 'success');
                setTimeout(closeSettings, 1000);
            } catch (e) {
                console.error('Error saving settings:', e);
                showToast('Ошибка сохранения настроек', 'error');
            }
        }

        // Применение настроек
        function applySettings() {
            document.body.className = document.body.className.replace(/theme-\w+/, '') + ' theme-' + currentSettings.theme;
            document.getElementById('languageSelect').value = currentSettings.language;
            document.getElementById('notificationsToggle').checked = currentSettings.notifications;
            document.getElementById('soundToggle').checked = currentSettings.soundNotifications;
            document.getElementById('showErrorsToggle').checked = currentSettings.showErrors;
            document.getElementById('autoClearToggle').checked = currentSettings.autoClear;
            
            document.querySelectorAll('.theme-preview').forEach(preview => {
                preview.classList.remove('active');
                if (preview.dataset.theme === currentSettings.theme) {
                    preview.classList.add('active');
                }
            });
            
            // Применяем специфические стили для светлой темы
            if (currentSettings.theme === 'light') {
                document.body.style.color = '#1e293b';
            } else {
                document.body.style.color = '#f8fafc';
            }
        }

        // Обновление UI при наличии Premium
        function updatePremiumUI() {
            // Всегда показываем Premium как активный
            const header = document.querySelector('h1');
            if (header) {
                // Добавляем или обновляем значок Premium
                let badge = header.querySelector('.premium-badge');
                if (!badge) {
                    badge = document.createElement('span');
                    badge.className = 'premium-badge ml-3';
                    header.appendChild(badge);
                }
                badge.textContent = 'PREMIUM';
            }
        }

        // Сброс настроек
        function resetSettings() {
            if (confirm('Вы уверены, что хотите сбросить все настройки к значениям по умолчанию?')) {
                // При сбросе все равно оставляем Premium активным
                currentSettings = {...defaultSettings};
                currentSettings.premium = true;
                saveSettings();
                showToast('Настройки сброшены. Premium остался активным!', 'info');
            }
        }

        // Выбор темы
        function selectTheme(theme) {
            document.querySelectorAll('.theme-preview').forEach(preview => {
                preview.classList.remove('active');
            });
            document.querySelector(`.theme-preview[data-theme="${theme}"]`).classList.add('active');
        }

        // Toast уведомления
        function showToast(message, type = 'success') {
            const toast = document.getElementById('successToast');
            const messageEl = document.getElementById('toastMessage');
            
            messageEl.textContent = message;
            toast.className = `toast ${type} show`;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 3000);
            }, 3000);
        }

        // Звуковые уведомления
        function playNotificationSound() {
            if (currentSettings.soundNotifications) {
                const sound = document.getElementById('notificationSound');
                sound.currentTime = 0;
                sound.play().catch(e => console.log('Audio play failed:', e));
            }
        }

        // Мобильное меню
        function openMobileMenu() {
            document.getElementById('mobileMenu').classList.add('active');
        }

        function closeMobileMenu() {
            document.getElementById('mobileMenu').classList.remove('active');
        }

        function switchMobileTab(tabId) {
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active', 'text-white');
                item.classList.add('text-gray-400');
            });
            
            const activeItem = document.querySelector(`.mobile-nav-item[data-tab="${tabId}"]`);
            if (activeItem) {
                activeItem.classList.add('active', 'text-white');
                activeItem.classList.remove('text-gray-400');
            }
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');
            
            if (tabId === 'stats') {
                setTimeout(updateStats, 300);
            }
            
            closeMobileMenu();
        }

        // Модальные окна
        function openSettings() {
            loadSettings();
            document.getElementById('settingsModal').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        document.getElementById('settingsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSettings();
            }
        });

        document.getElementById('mobileMenu').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMobileMenu();
            }
        });

        // Анимированные частицы
        function createParticles() {
            const container = document.getElementById('particles-container');
            const particleCount = window.innerWidth < 768 ? 15 : 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * (window.innerWidth < 768 ? 4 : 6) + 2;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                particle.style.animation = `floating ${duration}s ease-in-out ${delay}s infinite`;
                particle.style.opacity = Math.random() * 0.4 + 0.1;
                particle.style.background = `rgba(${Math.random() * 100 + 155}, ${Math.random() * 100 + 155}, 241, 0.3)`;
                
                container.appendChild(particle);
            }
        }

        // Рождественские украшения
        function createChristmasDecorations() {
            const container = document.getElementById('christmas-decorations');
            if (!container) return;
            
            // Создаем снежинки
            const snowflakeCount = 50;
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.innerHTML = ['❄', '❅', '❆'][Math.floor(Math.random() * 3)];
                snowflake.style.left = `${Math.random() * 100}%`;
                snowflake.style.animationDuration = `${Math.random() * 10 + 5}s`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                snowflake.style.fontSize = `${Math.random() * 10 + 10}px`;
                snowflake.style.opacity = Math.random() * 0.7 + 0.3;
                container.appendChild(snowflake);
            }
            
            // Создаем другие украшения
            const decorations = ['🎄', '🎁', '🔔', '🕯️', '✨'];
            const decorationCount = 20;
            for (let i = 0; i < decorationCount; i++) {
                const decoration = document.createElement('div');
                decoration.className = 'christmas-decoration';
                decoration.textContent = decorations[Math.floor(Math.random() * decorations.length)];
                decoration.style.left = `${Math.random() * 100}%`;
                decoration.style.top = `${Math.random() * 100}%`;
                decoration.style.fontSize = `${Math.random() * 20 + 15}px`;
                decoration.style.opacity = Math.random() * 0.5 + 0.3;
                container.appendChild(decoration);
            }
        }

        // Табы
        const tabBtns = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                tabBtns.forEach(b => {
                    b.classList.remove('active', 'text-white', 'bg-white/5');
                    b.classList.add('text-gray-400');
                });
                tabContents.forEach(c => c.classList.remove('active'));
                
                btn.classList.add('active', 'text-white', 'bg-white/5');
                btn.classList.remove('text-gray-400');
                const tabId = btn.getAttribute('data-tab');
                
                setTimeout(() => {
                    document.getElementById(tabId).classList.add('active');
                }, 50);
                
                if (tabId === 'stats') {
                    setTimeout(updateStats, 300);
                }
            });
        });

        // Функции для отправки email
        const emailForm = document.getElementById('emailForm');
        const sendBtn = document.getElementById('sendBtn');
        const statusContainer = document.getElementById('status');
        const progressBar = document.getElementById('progress');
        const progressPercent = document.getElementById('progressPercent');
        const currentSender = document.getElementById('currentSender');
        const totalCount = document.getElementById('totalCount');
        const sentCount = document.getElementById('sentCount');
        const errorCount = document.getElementById('errorCount');
        
        const totalStats = document.getElementById('totalStats');
        const successStats = document.getElementById('successStats');
        const errorStats = document.getElementById('errorStats');
        const successRate = document.getElementById('successRate');
        const avgTime = document.getElementById('avgTime');
        
        const mobileTotalStats = document.getElementById('mobileTotalStats');
        const mobileSuccessStats = document.getElementById('mobileSuccessStats');
        const mobileErrorStats = document.getElementById('mobileErrorStats');
        const mobileSuccessRate = document.getElementById('mobileSuccessRate');
        const mobileAvgTime = document.getElementById('mobileAvgTime');
        
        let emailStats = {
            total: 0,
            success: 0,
            error: 0,
            avgTime: 0,
            activity: []
        };

        function loadStats() {
            const savedStats = localStorage.getItem('xmailStats');
            if (savedStats) {
                try {
                    const parsed = JSON.parse(savedStats);
                    emailStats = {...emailStats, ...parsed};
                } catch (e) {
                    console.error('Error loading stats:', e);
                }
            }
            
            if (!emailStats.activity || emailStats.activity.length === 0) {
                const today = new Date();
                emailStats.activity = Array.from({length: 30}, (_, i) => {
                    const date = new Date();
                    date.setDate(today.getDate() - (29 - i));
                    return {
                        date: date.toISOString().split('T')[0],
                        count: Math.floor(Math.random() * 3)
                    };
                });
            }
            
            updateStats();
        }

        function saveEmailStats() {
            try {
                localStorage.setItem('xmailStats', JSON.stringify(emailStats));
            } catch (e) {
                console.error('Error saving stats:', e);
            }
        }

        function updateStats() {
            if (totalStats) totalStats.textContent = emailStats.total;
            if (successStats) successStats.textContent = emailStats.success;
            if (errorStats) errorStats.textContent = emailStats.error;
            if (totalCount) totalCount.textContent = emailStats.total;
            if (sentCount) sentCount.textContent = emailStats.success;
            if (errorCount) errorCount.textContent = emailStats.error;
            
            if (mobileTotalStats) mobileTotalStats.textContent = emailStats.total;
            if (mobileSuccessStats) mobileSuccessStats.textContent = emailStats.success;
            if (mobileErrorStats) mobileErrorStats.textContent = emailStats.error;
            
            const rate = emailStats.total > 0 ? Math.round((emailStats.success / emailStats.total) * 100) : 0;
            if (successRate) successRate.textContent = `${rate}% успеха`;
            if (mobileSuccessRate) mobileSuccessRate.textContent = `${rate}% успеха`;
            
            if (avgTime) avgTime.textContent = `${emailStats.avgTime.toFixed(1)}с`;
            if (mobileAvgTime) mobileAvgTime.textContent = `${emailStats.avgTime.toFixed(1)}с`;
            
            updateActivityChart();
        }

        let activityChart;
        function initActivityChart() {
            const ctx = document.getElementById('activityChart');
            if (!ctx) return;
            
            const labels = emailStats.activity.map(item => {
                const date = new Date(item.date);
                return date.getDate();
            });
            
            const data = emailStats.activity.map(item => item.count);
            
            if (activityChart) {
                activityChart.destroy();
            }
            
            activityChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Отправлено писем',
                        data: data,
                        backgroundColor: 'rgba(99, 102, 241, 0.6)',
                        borderColor: '#6366f1',
                        borderWidth: 2,
                        borderRadius: 6,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#6366f1',
                            borderWidth: 1,
                            callbacks: {
                                title: function(tooltipItems) {
                                    const index = tooltipItems[0].dataIndex;
                                    const date = new Date(emailStats.activity[index].date);
                                    return date.toLocaleDateString('ru-RU');
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                maxTicksLimit: window.innerWidth < 768 ? 10 : 15
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        function updateActivityChart() {
            if (activityChart) {
                const labels = emailStats.activity.map(item => {
                    const date = new Date(item.date);
                    return date.getDate();
                });
                
                const data = emailStats.activity.map(item => item.count);
                
                activityChart.data.labels = labels;
                activityChart.data.datasets[0].data = data;
                activityChart.update('none');
            }
        }

        function refreshChart() {
            if (activityChart) {
                activityChart.update();
            }
        }

        // Отправка email
        emailForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const receiver = document.getElementById('receiver').value;
            const subject = document.getElementById('subject').value;
            const body = document.getElementById('body').value;
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(receiver)) {
                addStatusMessage('<i class="fas fa-exclamation-triangle text-yellow-400"></i> Пожалуйста, введите корректный email адрес', 'error');
                return;
            }
            
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-2"></i> ОТПРАВКА...';
            
            statusContainer.innerHTML = '';
            addStatusMessage('<i class="fas fa-rocket text-blue-400"></i> Начинаем отправку письма...', 'info');
            addStatusMessage(`<i class="fas fa-envelope text-purple-400"></i> Получатель: ${receiver}`, 'info');
            
            animateProgress(0, 80, 1500);
            
            try {
                const response = await fetch('/.netlify/functions/send-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        to: receiver,
                        subject: subject,
                        body: body
                    })
                });
                
                animateProgress(80, 100, 500);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('Функция отправки не найдена. Режим демонстрации.');
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const text = await response.text();
                if (!text) {
                    throw new Error('Пустой ответ от сервера');
                }
                
                const data = JSON.parse(text);
                
                if (data.success) {
                    playNotificationSound();
                    
                    addStatusMessage(`<i class="fas fa-check-circle text-green-400"></i> ${data.message}`, 'success');
                    if (data.from) {
                        addStatusMessage(`<i class="fas fa-shield-alt text-blue-400"></i> Отправлено с: ${data.from}`, 'info');
                    }
                    
                    emailStats.total += 1;
                    emailStats.success += 1;
                    
                    const today = new Date().toISOString().split('T')[0];
                    const todayActivity = emailStats.activity.find(item => item.date === today);
                    if (todayActivity) {
                        todayActivity.count += 1;
                    } else {
                        emailStats.activity.push({ date: today, count: 1 });
                        if (emailStats.activity.length > 30) {
                            emailStats.activity = emailStats.activity.slice(-30);
                        }
                    }
                    
                    const sendTime = Math.random() * 2 + 1;
                    emailStats.avgTime = (emailStats.avgTime * (emailStats.total - 1) + sendTime) / emailStats.total;
                    
                    saveEmailStats();
                    updateStats();
                    
                    setTimeout(() => {
                        sendBtn.disabled = false;
                        sendBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> ОТПРАВИТЬ ПИСЬМО';
                        addStatusMessage(
                            `<i class="fas fa-party-horn text-purple-400"></i> Отправка завершена успешно!`,
                            'success'
                        );
                        
                        if (currentSettings.autoClear) {
                            emailForm.reset();
                        }
                        
                        currentSender.textContent = 'Готов к новой отправке';
                        progressBar.style.width = '0%';
                        progressPercent.textContent = '0%';
                    }, 1000);
                } else {
                    addStatusMessage(`<i class="fas fa-times-circle text-red-400"></i> Ошибка: ${data.message}`, 'error');
                    
                    emailStats.total += 1;
                    emailStats.error += 1;
                    saveEmailStats();
                    updateStats();
                    
                    sendBtn.disabled = false;
                    sendBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> ОТПРАВИТЬ ПИСЬМО';
                    currentSender.textContent = 'Обнаружена ошибка';
                }
            } catch (error) {
                console.error('Ошибка:', error);
                
                if (error.message.includes('не найдена') || error.message.includes('404')) {
                    addStatusMessage('<i class="fas fa-info-circle text-blue-400"></i> Режим демонстрации: Функция отправки не настроена', 'info');
                    addStatusMessage('<i class="fas fa-check-circle text-green-400"></i> Демо: Письмо успешно отправлено!', 'success');
                    
                    emailStats.total += 1;
                    emailStats.success += 1;
                    
                    const today = new Date().toISOString().split('T')[0];
                    const todayActivity = emailStats.activity.find(item => item.date === today);
                    if (todayActivity) {
                        todayActivity.count += 1;
                    } else {
                        emailStats.activity.push({ date: today, count: 1 });
                        if (emailStats.activity.length > 30) {
                            emailStats.activity = emailStats.activity.slice(-30);
                        }
                    }
                    
                    const sendTime = Math.random() * 2 + 1;
                    emailStats.avgTime = (emailStats.avgTime * (emailStats.total - 1) + sendTime) / emailStats.total;
                    saveEmailStats();
                    updateStats();
                    
                    setTimeout(() => {
                        sendBtn.disabled = false;
                        sendBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> ОТПРАВИТЬ ПИСЬМО';
                        if (currentSettings.autoClear) {
                            emailForm.reset();
                        }
                        currentSender.textContent = 'Демо-режим: Готов к отправке';
                        progressBar.style.width = '0%';
                        progressPercent.textContent = '0%';
                    }, 1000);
                } else {
                    if (currentSettings.showErrors) {
                        addStatusMessage(`<i class="fas fa-times-circle text-red-400"></i> Ошибка соединения: ${error.message}`, 'error');
                    } else {
                        addStatusMessage(`<i class="fas fa-times-circle text-red-400"></i> Ошибка соединения`, 'error');
                    }
                    
                    emailStats.total += 1;
                    emailStats.error += 1;
                    saveEmailStats();
                    updateStats();
                    
                    sendBtn.disabled = false;
                    sendBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> ОТПРАВИТЬ ПИСЬМО';
                    currentSender.textContent = 'Ошибка соединения';
                }
            }
        });

        // Прогресс бар
        function animateProgress(from, to, duration) {
            const startTime = performance.now();
            const updateProgress = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const currentWidth = from + (to - from) * progress;
                
                if (progressBar) {
                    progressBar.style.width = `${currentWidth}%`;
                }
                if (progressPercent) {
                    progressPercent.textContent = `${Math.round(currentWidth)}%`;
                }
                
                if (progress < 1) {
                    requestAnimationFrame(updateProgress);
                }
            };
            requestAnimationFrame(updateProgress);
        }

        function addStatusMessage(message, type) {
            if (!statusContainer) return;
            
            const statusItem = document.createElement('div');
            statusItem.className = `flex items-start gap-3 p-3 rounded-lg mb-2 ${
                type === 'error' ? 'bg-red-500/10 text-red-300' : 
                type === 'success' ? 'bg-green-500/10 text-green-300' : 
                'bg-blue-500/10 text-gray-300'
            }`;
            statusItem.innerHTML = message;
            statusContainer.appendChild(statusItem);
            statusContainer.scrollTop = statusContainer.scrollHeight;
        }

        function handleResize() {
            if (activityChart) {
                activityChart.resize();
            }
        }

        // Инициализация при загрузке
        window.addEventListener('load', () => {
            createParticles();
            createChristmasDecorations();
            loadSettings();
            loadStats();
            initActivityChart();
            
            document.querySelectorAll('.slide-up').forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            // Показываем форму поиска по IP по умолчанию
            showSearchForm('ip');
            
            // Показываем сообщение о бесплатном Premium
            showToast('Premium активирован! Все функции бесплатны!', 'success');
        });

        window.addEventListener('resize', handleResize);
    </script>
</body>
</html>
